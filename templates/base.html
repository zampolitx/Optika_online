<!DOCTYPE html>
<html lang="en">
<head>
    {% block title -%}
    <meta charset="UTF-8">
    <title>{{title}}</title>
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}">
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    {% endblock title %}
</head>
<body>
{%- block menu -%}
<div class="header">
    <h1>OPTIKA ONLINE by zampolit</h1>
</div>
<ul class="nav">        <!--это меню -->
    {% for m in menu %}
        <li><a href="{{m.url}}">{{m.title}}</a></li>
    {% endfor %}
</ul>
{% endblock %}
{% block content %}
<table class="main_table">
    <tr>    <!--1 ряд с ячейками зданий-->
        {% for key, value in building.items() %}
        <th>{{key}}</th>                <!-- {'Корпус1': -->
        {% endfor %}
    </tr>
    <tr>                                                    <!--Одна главная строка, в которой все кабинеты в каждом из зданий-->
        {% for key, value in building.items() %}              <!--key это название зданий, value - это список вида ***[{'title': 'Серверная 1 этаж', 'number': '101', 'child': [1]},***-->
        <th>                                                <!--Столбец с кабинетами-->
            {% for parlor in value %}                       <!-- value это список кабинетов [{'title':'КОВИ', 'number': '101', 'child': [{'Панель 1': -->
                <div class="parlor">                        <!--div это кабинет-->
                    {% if parlor.number %}
                        <h5><a href=showBuilding{{parlor.id}}> {{parlor.number}} {{parlor.title}} </a> </h5>                 <!--номер кабинета-->
                    {% else %}
                        <h5> <a href=showBuilding{{parlor.id}}> {{parlor.title}} </a> </h5>                 <!--номер кабинета-->
                    {% endif %}
                    {% for panel in parlor.child %}             <!--parlor.child это список-->
                        <div class="panel">
                            {% if panel.number %}
                                <h5> {{panel.number}} {{panel.title}} </h5>                 <!--номер панели-->
                            {% else %}
                                <h5> {{panel.title}} </h5>                 <!--номер кабинета-->
                            {% endif %}
                            {% for device in panel.child %}
                                <div class="cross">
                                    {% if device.number %}
                                        <h5> {{device.number}} {{device.title}} </h5>
                                    {% else %}
                                        <h5> {{device.title}} </h5>                 <!--название кросса или муфмы-->
                                    {% endif %}
                                    {% for cable in device.child %}
                                        <!--<div class="cable"> Нужно убрать потом этот div-->
                                            {% if cable.number %}   <!--если кабель разварен-->
                                                <table cellpadding="0" cellspacing="0" align="center" class="fiber_tab">   <!--таблица с волокнами-->
                                                    <tr>
                                                        <td rowspan={{(cable.child|length)+1}} class="rotate"> <div> {{cable.number}} </div> </td>
                                                        <!--<td rowspan={{(cable.child|length)+1}} class="vertical"> {{cable.number}} </td>-->
                                                        <th> Номер </th>
                                                        <th> name</th>
                                                    </tr>
                                                    {% for fiber in cable.child%}
                                                        <tr>
                                                            <th>{{ fiber.number }}</th>
                                                            <th>{{ fiber.title }}</th>
                                                        </tr>
                                                    {% endfor %}
                                                </table>
                                            {% else %}
                                                <h5> {{cable.title}} </h5>                 <!--Название кабеля-->
                                            {% endif %}
                                        <!--</div>-->
                                    {% endfor %}
                                </div>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </th>
        {% endfor %}
    </tr>
</table>
{% endblock %}
<script type=text/javascript src="{{ url_for('static', filename='js/jquery-3.6.0.min.js') }}"></script>
<script src="{{url_for('static', filename='js/main.js') }}"></script>
</body>
</html>